"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("vue"),_="--vc-auto-duration",N=`height var(${_}) cubic-bezier(0.33, 1, 0.68, 1)`,h={padding:0},T=300,F={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};function A(n){return n.value?parseFloat(getComputedStyle(n.value).height):0}function b(n){if(!n.value)return{};const{transition:l}=getComputedStyle(n.value);return l==="all 0s ease 0s"||l==="all"?{transition:N}:{transition:l}}function H(n){if(!n.value)return!0;const{transition:l}=getComputedStyle(n.value);return typeof window.requestAnimationFrame>"u"||window.matchMedia("(prefers-reduced-motion: reduce)").matches||l.includes("none")||l.includes("height 0s")}function $(n=0){if(n===0)return 0;const l=n/36,i=Math.round((4+15*l**.25+l/5)*10);return Number.isFinite(i)?i:0}const E=t.defineComponent({inheritAttrs:!0,__name:"Collapse",props:{when:{type:Boolean},baseHeight:{default:0},as:{default:"div"}},emits:["collapse","expand","collapsed","expanded"],setup(n,{emit:l}){const i=n,c=l,r=t.toRef(i,"when"),o=t.toRef(i,"baseHeight"),v=t.computed(()=>({overflow:"hidden",height:`${o.value}px`})),f=t.computed(()=>({...h,...o.value===0?{display:"none"}:v.value})),a=t.ref(null),g=t.ref(r.value?"expanded":"collapsed"),d=e=>g.value=e;function C(){return r.value?h:o.value===0?F:f.value}const m=t.shallowRef(C()),s=e=>m.value=e,u=e=>s({...m.value,...e}),x=t.ref(T),D=e=>x.value=e,w=t.computed(()=>({[_]:`${x.value}ms`}));let p=NaN;function y(){s(h),d("expanded"),c("expanded")}function S(){s(f.value),d("collapsed"),c("collapsed")}t.onMounted(()=>{if(!a.value)return;const e=$(a.value.scrollHeight-o.value);e>0&&D(e),!r.value&&o.value===0&&s(f.value)}),t.watch(r,e=>{if(a.value)if(p=NaN,e){if(H(a))return y();d("expanding"),c("expand"),s({...h,...v.value,...w.value}),requestAnimationFrame(()=>{if(a.value.scrollHeight===0)return y();p=a.value.scrollHeight,u({...b(a),height:`${p}px`,willChange:"height"})})}else{if(H(a)||(d("collapsing"),c("collapse"),u({...w.value,height:`${a.value.scrollHeight}px`}),a.value.scrollHeight===0))return S();requestAnimationFrame(()=>{u({...v.value,...b(a),willChange:"height"})})}}),t.watch(o,e=>{r.value||(e>0?u({display:void 0,height:`${e}px`}):u({display:"none"}))});function R(e){e.target&&e.target===a.value&&e.propertyName==="height"&&(r.value?Math.abs(a.value.scrollHeight-A(a))<1?y():p<a.value.scrollHeight&&u({height:`${a.value.scrollHeight}px`}):Math.abs(o.value-A(a))<1&&S())}return(e,I)=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(i.as),{ref_key:"collapseRef",ref:a,style:t.normalizeStyle(m.value),onTransitionend:R,"data-collapse":g.value},{default:t.withCtx(()=>[t.renderSlot(e.$slots,"default",t.normalizeProps(t.guardReactiveProps({state:g.value})))]),_:3},40,["style","data-collapse"]))}});exports.Collapse=E;
