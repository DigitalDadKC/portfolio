import{u as B,s as f,v as U,i as n,j as z,o as u,w as o,a,b as t,h as N,d as m,c,e as p,t as _,p as A,k as y}from"./app-B36-XCD0.js";import{_ as M}from"./EstimatingLayout-D_4DmskC.js";import{P as O}from"./PrimaryButton-CEhAluKe.js";import{_ as $}from"./SecondaryButton-BY0miM6g.js";import{V as J}from"./VDateInput-DlIuPola.js";import"./NavLink-BrQt31dZ.js";import"./GuestLayout-C970xYKx.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={key:0,class:"text-red-400"},E={key:1,class:"text-red-400"},F={key:0,class:"text-red-400"},T={key:0,class:"text-red-400"},I={key:0,class:"text-red-400"},L={class:"flex justify-end"},Y={class:"flex gap-2"},X={__name:"Job",props:{new:Boolean,job:Object,company:Object,states:Object},setup(v){const l=v,e=B({id:l.job.id,number:l.job.number,address:l.job.address,city:l.job.city,state_id:l.job.state.id,zip:l.job.zip,start_date:l.job.start_date,notes:l.job.notes,created_at:l.job.created_at});f(()=>{if(!e.start_date)return"";let r=new Date(e.start_date);return r=new Date(r.setDate(r.getDate()+e.days)).toLocaleDateString(),r});const V=f(()=>[{id:null,state:"Select"},...l.states]);f(()=>[{id:null,UOM:"Select"},...l.unit_of_measurements]);const x=()=>{l.new?e.post(route("estimating.store"),{onSuccess:()=>{e.reset()}}):e.patch(route("estimating.update",{job:e.id}),{onSuccess:()=>{}})};return U(()=>{e.start_date&&(e.start_date=new Date(l.job.start_date)),l.new&&(e.created_at=new Date)}),(r,s)=>{const j=n("v-img"),i=n("v-col"),k=n("v-btn"),w=n("v-card"),b=n("v-text-field"),h=n("v-select"),g=n("v-row"),D=n("v-textarea"),S=n("v-form"),C=n("v-container");return u(),z(M,null,{default:o(()=>[a(t(N),{title:"Job"}),a(C,{class:"w-100 w-xl-75 bg-grey-lighten-2 rounded-lg"},{default:o(()=>[a(S,null,{default:o(()=>[a(g,{class:"pa-2"},{default:o(()=>[a(i,{cols:"12",md:"6"},{default:o(()=>[a(j,{src:"/img/logo.png",class:"rounded-md","aria-label":"company logo"}),s[8]||(s[8]=m("div",{density:"compact",disabled:"",class:"text-h5"},"ABC Company",-1)),s[9]||(s[9]=m("div",{density:"compact",disabled:"",class:"text-h5"},"123 Main St",-1)),s[10]||(s[10]=m("div",{density:"compact",disabled:"",class:"text-h5"},"Scranton, PA 12345",-1))]),_:1,__:[8,9,10]}),m("template",null,[a(w,{class:"mx-auto",color:"surface-variant",image:"https://cdn.vuetifyjs.com/docs/images/cards/dark-beach.jpg","max-width":"340",subtitle:"Take a walk down the beach",title:"Evening sunset"},{actions:o(()=>[a(k,{"append-icon":"mdi-chevron-right",color:"red-lighten-2",text:"Book Activity",variant:"outlined",block:""})]),_:1})]),a(i,{cols:"12",md:"6",class:"flex flex-col bg-light-secondary dark:bg-dark-secondary rounded-lg p-2"},{default:o(()=>[a(b,{modelValue:t(e).number,"onUpdate:modelValue":s[0]||(s[0]=d=>t(e).number=d),modelModifiers:{number:!0},type:"number",prefix:`D${new Date(t(e).created_at).getFullYear()} - `,"hide-details":"",density:"compact",label:"Job Number *",class:"bg-grey-lighten-4"},null,8,["modelValue","prefix"]),t(e).errors.number?(u(),c("div",P,_(t(e).errors.number),1)):p("",!0),a(b,{modelValue:t(e).address,"onUpdate:modelValue":s[1]||(s[1]=d=>t(e).address=d),"hide-details":"",density:"compact",label:"Address *",class:"bg-grey-lighten-4"},null,8,["modelValue"]),t(e).errors.address?(u(),c("div",E,_(t(e).errors.address),1)):p("",!0),a(g,{"no-gutters":""},{default:o(()=>[a(i,{cols:"12",lg:"6"},{default:o(()=>[a(b,{modelValue:t(e).city,"onUpdate:modelValue":s[2]||(s[2]=d=>t(e).city=d),"hide-details":"",density:"compact",label:"City *",class:"bg-grey-lighten-4"},null,8,["modelValue"]),t(e).errors.city?(u(),c("div",F,_(t(e).errors.city),1)):p("",!0)]),_:1}),a(i,{cols:"12",lg:"3"},{default:o(()=>[a(h,{modelValue:t(e).state_id,"onUpdate:modelValue":s[3]||(s[3]=d=>t(e).state_id=d),"hide-details":"",items:V.value,"item-title":"state","item-value":"id",label:"State *",density:"compact",class:"bg-grey-lighten-4"},null,8,["modelValue","items"]),t(e).errors.state_id?(u(),c("div",T,_(t(e).errors.state_id),1)):p("",!0)]),_:1}),a(i,{cols:"12",lg:"3"},{default:o(()=>[a(b,{modelValue:t(e).zip,"onUpdate:modelValue":s[4]||(s[4]=d=>t(e).zip=d),"hide-details":"",label:"Zip Code *",density:"compact",class:"bg-grey-lighten-4"},null,8,["modelValue"]),t(e).errors.zip?(u(),c("div",I,_(t(e).errors.zip),1)):p("",!0)]),_:1})]),_:1}),a(t(J),{modelValue:t(e).start_date,"onUpdate:modelValue":s[5]||(s[5]=d=>t(e).start_date=d),label:"Start Date",density:"compact","hide-details":"",class:"bg-grey-lighten-4"},null,8,["modelValue"]),a(D,{modelValue:t(e).notes,"onUpdate:modelValue":s[6]||(s[6]=d=>t(e).notes=d),"hide-details":"",label:"Notes",class:"bg-grey-lighten-4 my-1"},null,8,["modelValue"])]),_:1})]),_:1}),a(g,null,{default:o(()=>[a(i,null,{default:o(()=>[m("div",L,[m("div",Y,[a(t(A),{href:r.route("estimating.index"),prefetch:""},{default:o(()=>[a(O,{type:"button"},{default:o(()=>s[11]||(s[11]=[y("Cancel",-1)])),_:1,__:[11]})]),_:1},8,["href"]),a($,{disabled:t(e).processing,onClick:s[7]||(s[7]=d=>x())},{default:o(()=>s[12]||(s[12]=[y("Save",-1)])),_:1,__:[12]},8,["disabled"])])])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{X as default};
