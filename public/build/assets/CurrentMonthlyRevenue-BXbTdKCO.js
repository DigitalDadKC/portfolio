import{u as k}from"./useFormatCurrency-C2nvWDUD.js";import{i as y,c as h,o as p,d as o,a as f,w as b,k as M,t as g,b as r,e as w}from"./app-B36-XCD0.js";const C={class:"relative"},D={class:"p-3 bg-white inline-flex border-2 rounded-lg border-light-quatrenary dark:border-dark-quatrenary absolute -top-6 left-0"},j={class:"pl-16"},B={class:"text-lg font-bold tracking-tight text-gray-900 dark:text-white mb-2"},F={class:"flex items-center"},V={key:0,class:"w-6 h-6 text-green-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},q={key:1,class:"w-6 h-6 text-red-500","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},R={__name:"CurrentMonthlyRevenue",props:{jobs:Object},setup(_){const{formatWithCommas:i}=k(),m=_,v=m.jobs.filter(t=>new Date(t.created_at).getMonth()==new Date().getMonth()&&new Date(t.created_at).getFullYear()==new Date().getFullYear()),x=m.jobs.filter(t=>new Date(t.created_at).getMonth()==new Date().getMonth()-1&&new Date(t.created_at).getFullYear()==new Date().getFullYear()),l=v.flatMap(t=>t.proposals.reduce((e,s)=>e+s.scopes.reduce((d,u)=>d+u.lines.reduce((c,a)=>c+a.price*a.quantity,0),0),0)).reduce((t,e)=>e+t,0),n=x.flatMap(t=>t.proposals.reduce((e,s)=>e+s.scopes.reduce((d,u)=>d+u.lines.reduce((c,a)=>c+a.price*a.quantity,0),0),0)).reduce((t,e)=>e+t,0);return(t,e)=>{const s=y("v-icon");return p(),h("div",C,[o("div",D,[f(s,{size:"x-large"},{default:b(()=>e[0]||(e[0]=[M("mdi-currency-usd",-1)])),_:1,__:[0]})]),o("div",j,[e[3]||(e[3]=o("h5",{class:"my-2 text-2xl font-bold tracking-tight text-gray-900 dark:text-white"},"Current Monthly Revenue",-1)),o("h5",B,g(r(i)(r(l),"currency")),1),e[4]||(e[4]=o("h6",null,"Previous Monthly Revenue",-1)),o("h6",null,g(r(i)(r(n),"currency")),1),o("div",F,[r(l)-r(n)>0?(p(),h("svg",V,e[1]||(e[1]=[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v13m0-13 4 4m-4-4-4 4"},null,-1)]))):w("",!0),r(l)-r(n)<0?(p(),h("svg",q,e[2]||(e[2]=[o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19V5m0 14-4-4m4 4 4-4"},null,-1)]))):w("",!0),o("h6",null,g(r(i)((r(l)-r(n))/r(n)*100,"percent")),1)])])])}}};export{R as default};
