import{aj as q,ak as z,al as L,am as ne,an as re,ao as le,ap as j,ad as N,g as T,s as I,aq as ue,l as oe,ar as ie,as as J,at as Y,au as M,av as K,a as S,d as se,aw as de,m as U,F as ce,ax as fe,ay as me,az as ve,aA as pe,aB as ye,aC as Ve,aD as Pe}from"./app-B36-XCD0.js";class P{constructor(t,r){this.order=t,this.separator=r}get format(){return this.order.split("").map(t=>`${t}${t}`).join(this.separator).replace("yy","yyyy")}static canBeParsed(t){if(typeof t!="string")return!1;const r=t.toLowerCase();return["y","m","d"].every(u=>r.includes(u))&&["/","-","."].some(u=>t.includes(u))}static parse(t){if(!P.canBeParsed(t))throw new Error(`[${t}] cannot be parsed into date format specification`);const r=t.toLowerCase().split("").filter((i,g,n)=>"dmy".includes(i)&&n.indexOf(i)===g).join(""),u=["/","-","."].find(i=>t.includes(i));return new P(r,u)}}const De=q({inputFormat:{type:String,validator:e=>!e||P.canBeParsed(e)}},"date-format");function Fe(e,t){const r=z();function u(){const f=t.value??"en-US",y=Intl.DateTimeFormat(f,{year:"numeric",month:"2-digit",day:"2-digit"}).format(r.toJsDate(r.parseISO("1999-12-07"))).replace(/(07)|(٠٧)|(٢٩)|(۱۶)|(০৭)/,"dd").replace(/(12)|(١٢)|(٠٨)|(۰۹)|(১২)/,"mm").replace(/(1999)|(2542)|(١٩٩٩)|(١٤٢٠)|(۱۳۷۸)|(১৯৯৯)/,"yyyy").replace(/[^ymd\-/.]/g,"").replace(/\.$/,"");return P.canBeParsed(y)?y:"mm/dd/yyyy"}const i=L(()=>P.canBeParsed(e.inputFormat)?P.parse(e.inputFormat):P.parse(u()));function g(f){function y(o){const d=o.trim().split(i.value.separator);return{y:Number(d[i.value.order.indexOf("y")]),m:Number(d[i.value.order.indexOf("m")]),d:Number(d[i.value.order.indexOf("d")])}}function x(o){const{y:d,m:p,d:k}=o;return!d||!p||!k||p<1||p>12||k<1||k>31?null:{year:h(d),month:p,day:k}}function h(o){const d=r.getYear(r.date());if(o>100||d%100>=50)return o;const p=~~(d/100)*100;return o<50?p+o:p-100+o}const C=y(f),l=x(C);if(!l)return null;const{year:s,month:v,day:D}=l,A=o=>String(o).padStart(2,"0");return r.parseISO(`${s}-${A(v)}-${A(D)}`)}function n(f){return!!g(f)}function O(f){const y=r.toISO(f).split("T")[0].split("-");return i.value.order.split("").map(x=>y["ymd".indexOf(x)]).join(i.value.separator)}return{isValid:n,parseDate:g,formatDate:O,parserFormat:L(()=>i.value.format)}}const ge=q({displayFormat:{type:[Function,String],default:void 0},location:{type:String,default:"bottom start"},menu:Boolean,updateOn:{type:Array,default:()=>["blur","enter"]},...De(),...ye({mobile:null}),...pe(),...ve({hideActions:!0}),...me({prependIcon:"$calendar"}),...M(Ve({hideHeader:!0,showAdjacentMonths:!0}),["active","location","rounded"])},"VDateInput"),ke=ne()({name:"VDateInput",props:ge(),emits:{save:e=>!0,cancel:()=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,t){let{emit:r,slots:u}=t;const{t:i,current:g}=re(),n=z(),{isValid:O,parseDate:f,formatDate:y,parserFormat:x}=Fe(e,g),{mobile:h}=le(e),C=()=>e.multiple?[]:null,l=j(e,"modelValue",C(),a=>Array.isArray(a)?a.map(c=>n.toJsDate(c)):a&&n.toJsDate(a),a=>Array.isArray(a)?a.map(c=>n.date(c)):a&&n.date(a)),s=j(e,"menu"),v=N(!1),D=N(e.focused),A=T(),o=T(["save"]);function d(a){return typeof e.displayFormat=="function"?e.displayFormat(a):e.displayFormat?n.format(a,e.displayFormat??"keyboardDate"):y(a)}const p=I(()=>{const a=ue(l.value);if(!a.length)return null;if(e.multiple===!0)return i("$vuetify.datePicker.itemsSelected",a.length);if(e.multiple==="range"){const c=a[0],V=a[a.length-1];return!n.isValid(c)||!n.isValid(V)?"":`${d(n.date(c))} - ${d(n.date(V))}`}return n.isValid(l.value)?d(n.date(l.value)):""}),k=I(()=>{if(h.value)return v.value?"text":"none"}),$=I(()=>!e.disabled&&!e.readonly),H=I(()=>e.updateOn.length?!(h.value&&v.value)&&e.readonly:!0);oe(s,a=>{a||(v.value=!1,o.value=["save"])});function W(a){a.key==="Enter"&&((!s.value||!D.value)&&(s.value=!0),e.updateOn.includes("enter")&&E(a.target))}function R(a){a.preventDefault(),a.stopPropagation(),s.value&&h.value?v.value=!0:s.value=!0}function G(){r("cancel"),s.value=!1,v.value=!1}function Q(a){r("save",a),s.value=!1}function X(a){a==null&&(l.value=C())}function Z(a){e.updateOn.includes("blur")&&E(a.target),h.value&&v.value&&!D.value&&(s.value=!1,v.value=!1)}function E(a){let{value:c}=a;if(!c.trim())l.value=C();else if(!e.multiple)O(c)&&(l.value=f(c));else{const V=c.trim().split(/\D+-\D+|[^\d\-/.]+/);if(V.every(O))if(e.multiple==="range"){const[w,F]=V.map(f).toSorted((B,b)=>n.isAfter(B,b)?1:-1);l.value=Pe(n,w,F)}else l.value=V.map(f)}}return ie(()=>{const a=J.filterProps(e),c=Y.filterProps(M(e,["active","location","rounded"])),V=K.filterProps(M(e,["placeholder"]));return S(K,U({ref:A},V,{class:e.class,style:e.style,modelValue:p.value,inputmode:k.value,placeholder:e.placeholder??x.value,readonly:H.value,onKeydown:$.value?W:void 0,focused:s.value||D.value,onBlur:Z,validationValue:l.value,"onClick:control":$.value?R:void 0,"onClick:prepend":$.value?R:void 0,"onUpdate:modelValue":X,"onUpdate:focused":w=>D.value=w}),{...u,default:()=>{var w;return se(ce,null,[S(de,{modelValue:s.value,"onUpdate:modelValue":F=>s.value=F,activator:"parent",minWidth:"0",eager:D.value,location:e.location,closeOnContentClick:!1,openOnClick:!1},{default:()=>[S(J,U(a,{modelValue:l.value,"onUpdate:modelValue":F=>l.value=F,disabled:o.value,onSave:Q,onCancel:G}),{default:F=>{let{actions:B,model:b,save:_,cancel:ee,isPristine:ae}=F;function te(m){e.hideActions?(l.value=m,e.multiple||(s.value=!1)):b.value=m,r("save",m),o.value=[]}return S(Y,U(c,{modelValue:e.hideActions?l.value:b.value,"onUpdate:modelValue":m=>te(m),onMousedown:m=>m.preventDefault()}),{actions:e.hideActions?void 0:()=>{var m;return((m=u.actions)==null?void 0:m.call(u,{save:_,cancel:ee,isPristine:ae}))??B()}})}})]}),(w=u.default)==null?void 0:w.call(u)])}})}),fe({},A)}});export{ke as V};
