import{g as $,u as E,l as F,i as r,j as c,o as d,w as o,a as s,c as f,e as b,b as l,t as i,F as U,r as z,p as O,k as _,m as w}from"./app-B36-XCD0.js";import{P}from"./PrimaryButton-CEhAluKe.js";import{_ as j}from"./SecondaryButton-BY0miM6g.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const D={key:0,class:"text-red-500"},J={key:0,class:"text-red-500"},A={__name:"ManageCustomer",props:{customer:Object,states:Object,new:Boolean},setup(y){const n=y,m=$(!1),t=E({id:n.customer.id,name:n.customer.name,state_id:n.customer.state.id}),g=()=>{n.new?t.post(route("customers.store"),{onSuccess:()=>{m.value=!1,t.reset()}}):t.patch(route("customers.update",{customer:t.id}),{onSuccess:()=>{m.value=!1},preserveState:"errors"})};return F(()=>n.customer,u=>{t.id=u.id,t.name=u.name,t.state_id=u.state.id}),(u,e)=>{const v=r("v-icon"),C=r("v-text-field"),p=r("v-col"),S=r("v-autocomplete"),k=r("v-row"),x=r("v-card-text"),V=r("v-card"),B=r("v-card-actions"),N=r("v-dialog");return d(),c(N,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=a=>m.value=a),"max-width":"600"},{activator:o(({props:a})=>[n.new?(d(),c(v,w({key:0},a,{size:"52"}),{default:o(()=>e[5]||(e[5]=[_("mdi-plus-box",-1)])),_:2,__:[5]},1040)):(d(),c(v,w({key:1},a,{size:"32"}),{default:o(()=>e[6]||(e[6]=[_("mdi-pencil",-1)])),_:2,__:[6]},1040))]),default:o(()=>[s(V,{title:n.new?"New Customer":`Edit ${n.customer.name??""}`},{default:o(()=>[s(x,null,{default:o(()=>[s(k,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[s(C,{density:"compact",modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=a=>l(t).name=a),label:"Name"},null,8,["modelValue"]),l(t).errors.name?(d(),f("h1",D,i(l(t).errors.name),1)):b("",!0)]),_:1}),s(p,{cols:"12"},{default:o(()=>[s(S,{density:"compact",modelValue:l(t).state_id,"onUpdate:modelValue":e[1]||(e[1]=a=>l(t).state_id=a),items:n.states,label:"State","item-title":"state","item-value":"id",clearable:""},null,8,["modelValue","items"]),l(t).errors.state_id?(d(),f("h1",J,i(l(t).errors.state_id),1)):b("",!0)]),_:1})]),_:1}),s(k,null,{default:o(()=>[s(p,{cols:"12"},{default:o(()=>[s(V,{title:"Jobs",subtitle:"click on a job"},{default:o(()=>[(d(!0),f(U,null,z(n.customer.jobs,a=>(d(),c(x,{key:a.id},{default:o(()=>[s(l(O),{href:u.route("estimating.edit",a.id),prefetch:""},{default:o(()=>[_(i(a.number)+" - ("+i(a.city)+", "+i(a.state.abbr)+") ",1)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),s(B,null,{default:o(()=>[s(j,{text:"Close",variant:"plain",onClick:e[2]||(e[2]=a=>{m.value=!1,l(t).reset(),l(t).clearErrors()})},{default:o(()=>e[7]||(e[7]=[_("Cancel",-1)])),_:1,__:[7]}),s(P,{color:"primary",text:"Save",onClick:e[3]||(e[3]=a=>g())},{default:o(()=>e[8]||(e[8]=[_("Save",-1)])),_:1,__:[8]})]),_:1})]),_:1},8,["title"])]),_:1},8,["modelValue"])}}};export{A as default};
