import{g as p,v as I,aF as b,c as i,o as d,a as T,d as t,b as o,h as z,B as a,aG as A,E as L,F as f,r as C,t as u,aH as r,z as E}from"./app-B36-XCD0.js";const G={class:"container mx-auto bg-light-primary w-full max-w-4xl"},O={class:"invoices"},P={class:"card__content"},R={class:"card__content--header"},H=["value"],J={class:"table"},Q=["onUpdate:modelValue"],j=["onUpdate:modelValue"],K={key:0},W={key:1},X=["onClick"],Y={style:{padding:"10px 30px !important"}},Z={class:"table__footer"},h={class:"document-footer"},tt={class:"table__footer--subtotal"},lt={class:"table__footer--discount"},et={class:"table__footer--total"},nt={class:"card__header",style:{"margin-top":"40px"}},st={class:"modal__content"},ot={class:"modal__items"},it={style:{"list-style":"none"}},dt={href:"#"},at=["onClick"],ut={class:"model__footer"},vt={__name:"Create",setup(pt){let s=p([]),k=p([]),m=p([]),U=p([]),v=p([]);const y=p(!1),D=p(!0),w=p([]);I(async()=>{N(),S(),M()});const N=async()=>{let n=await b.get("/api/create_invoice");s.value=n.data},S=async()=>{let n=await b.get("/api/clients");k.value=n.data.clients},$=n=>{const l={id:n.id,item_code:n.item_code,description:n.description,unit_price:n.unit_price,quantity:n.quantity};v.value.push(l),x()},q=()=>{y.value=!y.value},x=()=>{y.value=!D.value},M=async()=>{let n=await b.get("/api/products");w.value=n.data.products},B=n=>{v.value.splice(n,1)},g=()=>{let n=0;return v.value.map(l=>{n=n+l.quantity*l.unit_price}),n},V=()=>g()-s.value.discount,F=()=>{if(v.value.length){let n=0;n=g();let l=0;l=V();const e=new FormData;e.append("invoice_item",JSON.stringify(v.value)),e.append("client_id",m.value),e.append("date",s.value.date),e.append("due_date",s.value.due_date),e.append("number",s.value.number),e.append("reference",s.value.reference),e.append("discount",s.value.discount),e.append("subtotal",n),e.append("total",l),e.append("terms_and_conditions",s.value.terms_and_conditions),console.log(...e),b.post("/api/add_invoice",e),v.value=[]}};return(n,l)=>(d(),i(f,null,[T(o(z),{title:"Create Invoice"}),t("div",G,[t("div",O,[l[25]||(l[25]=t("div",{class:"card__header"},[t("div",null,[t("h2",{class:"invoice__title"},"New Invoice")]),t("div")],-1)),t("div",P,[t("div",R,[t("div",null,[l[12]||(l[12]=t("p",{class:"my-1"},"Client",-1)),a(t("select",{name:"",id:"",class:"input","onUpdate:modelValue":l[0]||(l[0]=e=>L(m)?m.value=e:m=e)},[l[11]||(l[11]=t("option",{disabled:"",value:""},"Select Client",-1)),(d(!0),i(f,null,C(o(k),e=>(d(),i("option",{value:e.id,key:e.id},u(e.name),9,H))),128))],512),[[A,o(m)]])]),t("div",null,[l[13]||(l[13]=t("p",{class:"my-1"},"Date",-1)),a(t("input",{id:"date",placeholder:"dd-mm-yyyy",type:"date",class:"input","onUpdate:modelValue":l[1]||(l[1]=e=>o(s).date=e)},null,512),[[r,o(s).date]]),l[14]||(l[14]=t("p",{class:"my-1"},"Due Date",-1)),a(t("input",{id:"due_date",type:"date",class:"input","onUpdate:modelValue":l[2]||(l[2]=e=>o(s).due_date=e)},null,512),[[r,o(s).due_date]])]),t("div",null,[l[15]||(l[15]=t("p",{class:"my-1"},"Numero",-1)),a(t("input",{type:"text",class:"input","onUpdate:modelValue":l[3]||(l[3]=e=>o(s).number=e)},null,512),[[r,o(s).number]]),l[16]||(l[16]=t("p",{class:"my-1"},"Reference(Optional)",-1)),a(t("input",{type:"text",class:"input","onUpdate:modelValue":l[4]||(l[4]=e=>o(s).reference=e)},null,512),[[r,o(s).reference]])])]),l[22]||(l[22]=t("br",null,null,-1)),l[23]||(l[23]=t("br",null,null,-1)),t("div",J,[l[17]||(l[17]=t("div",{class:"table--heading2"},[t("p",null,"Item Description"),t("p",null,"Unit Price"),t("p",null,"Qty"),t("p",null,"Total"),t("p")],-1)),(d(!0),i(f,null,C(o(v),(e,c)=>(d(),i("div",{class:"table--items2",key:c},[t("p",null,u(e.item_code)+" "+u(e.description),1),t("p",null,[a(t("input",{type:"text",class:"input","onUpdate:modelValue":_=>e.unit_price=_},null,8,Q),[[r,e.unit_price]])]),t("p",null,[a(t("input",{type:"text",class:"input","onUpdate:modelValue":_=>e.quantity=_},null,8,j),[[r,e.quantity]])]),o(U).quantity?(d(),i("p",K," $ "+u(e.quantity*e.unit_price),1)):(d(),i("p",W)),t("p",{style:{color:"red","font-size":"24px",cursor:"pointer"},onClick:_=>B(c)}," × ",8,X)]))),128)),t("div",Y,[t("button",{class:"btn btn-sm btn__open--modal",onClick:l[5]||(l[5]=e=>q())},"Add New Line")])]),t("div",Z,[t("div",h,[l[18]||(l[18]=t("p",null,"Terms and Conditions",-1)),a(t("textarea",{cols:"50",rows:"7",class:"textarea","onUpdate:modelValue":l[6]||(l[6]=e=>o(s).terms_and_conditions=e)},null,512),[[r,o(s).terms_and_conditions]])]),t("div",null,[t("div",tt,[l[19]||(l[19]=t("p",null,"Sub Total",-1)),t("span",null,"$ "+u(g()),1)]),t("div",lt,[l[20]||(l[20]=t("p",null,"Discount",-1)),a(t("input",{type:"text",class:"input","onUpdate:modelValue":l[7]||(l[7]=e=>o(s).discount=e)},null,512),[[r,o(s).discount]])]),t("div",et,[l[21]||(l[21]=t("p",null,"Grand Total",-1)),t("span",null,"$ "+u(V()),1)])])])]),t("div",nt,[l[24]||(l[24]=t("div",null,null,-1)),t("div",null,[t("a",{class:"btn btn-secondary",onClick:l[8]||(l[8]=e=>F())}," Save ")])])]),t("div",{class:E(["modal main__modal",{show:y.value}])},[t("div",st,[t("span",{class:"modal__close btn__close--modal",onClick:l[9]||(l[9]=e=>x())},"×"),l[28]||(l[28]=t("h3",{class:"modal__title"},"Add Item",-1)),l[29]||(l[29]=t("hr",null,null,-1)),l[30]||(l[30]=t("br",null,null,-1)),t("div",ot,[t("ul",it,[(d(!0),i(f,null,C(w.value,(e,c)=>(d(),i("li",{key:e.id,style:{display:"grid","grid-template-columns":"30px 350px 15px","align-items":"center","padding-bottom":"5px"}},[t("p",null,u(c+1),1),t("a",dt,u(e.item_code)+" "+u(e.description),1),t("button",{onClick:_=>$(e),style:{border:"1px solid #e0e0e0",width:"35px",height:"35px",cursor:"pointer"}}," + ",8,at)]))),128))]),l[26]||(l[26]=t("select",{class:"input my-1"},[t("option",{value:"None"},"None"),t("option",{value:"None"},"LBC Padala")],-1))]),l[31]||(l[31]=t("br",null,null,-1)),l[32]||(l[32]=t("hr",null,null,-1)),t("div",ut,[t("button",{class:"btn btn-light mr-2 btn__close--modal",onClick:l[10]||(l[10]=e=>x())}," Cancel "),l[27]||(l[27]=t("button",{class:"btn btn-light btn__close--modal"},"Save",-1))])])],2)])],64))}};export{vt as default};
